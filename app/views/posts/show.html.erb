<div class="col-lg-12 mx-auto">
<div class="row"> 
      <div class="col-lg-3 mt-4 ml-4">
        <% if @post.image.attached? %>
          <%= image_tag @post.image.variant(resize_to_fill: [870, 1200]).processed, class: "card-img " %>
        <% else %>
          <%= image_tag "no_image", class: "card-img" %>
        <% end %>
      </div>
  <div class="card col-lg-4 mt-4 mb-3 ">
    <div class="row no-gutters">
      <div class="col-lg-6">
        <div class="card-body scroll">
          <p> 入手場所 <br><%= @post.place %></p>
        </div>

        <hr>

        <div class="card-body scroll">
          <p> 訪問日 <br><%= @post.date %></p>
        </div>

        <hr>

        <div class="card-body scroll">
          <p> メモ欄 <%= simple_format (@post.caption) %></p>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-4 mr-4">
    <p>
      <%= link_to t(".edit"), edit_post_path(@post), method: :get, class: "btn btn-lg btn-primary" %>
    </p>
    <p>
      <%= button_tag t(".delete"), class: "btn btn-lg btn-warning", data: { toggle: "modal", target: "#delete-post" } %>
    </p>
  </div>

    </div>
    </div>
    
    

<%# googleマップ %>
<div class="col-lg-12"> 

  <%# <input id="address" type="textbox">
  <input type="button" value="検索" onclick="codeAddress()">
 %>
  <div id='map'></div>

  <style>
  #map {
    height: 250px;
    width: 1200px;
  }
  
  </style>

  <script>
  let map

  function initMap(){
    geocoder = new google.maps.Geocoder()

    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: <%= @post.latitude %>, lng: <%= @post.longitude %>},
      zoom: 8,
    });

    marker = new google.maps.Marker({
      position:  {lat: <%= @post.latitude %> , lng: <%= @post.longitude %>},
      map: map
    });
  }

  let geocoder

  function codeAddress(){
    let inputAddress = document.getElementById('address').value;

    geocoder.geocode( { 'address': inputAddress}, function(results, status) {
      if (status == 'OK') {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
          map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('該当する結果がありませんでした：' + status);
      }
    });   
  }

  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBk8ADzxo8OlBK9b64JZuM7qvsJ5kocugY&callback=initMap" async defer></script>
</div>




<%= render "delete_modal" , post: @post %>
