<div class="container col-7 mx-auto">
  <div class="row"> 
        <div class="col-lg-5 mt-3 mb-4">
    <div class="animated fadeInDown ">
          <% if @post.image.attached? %>
            <%= image_tag @post.image.variant(resize_to_fill: [930, 1300]).processed, class: "card-img " %>
          <% else %>
            <%= image_tag "no_image", class: "card-img" %>
          <% end %>
    </div>
        </div>
        <div class="card border border-0 col-lg-7 mt-0 mb-2">
          <div class="row no-gutters">
            <div class="card-body ">
              <%= link_to user_path(@post.user) do %>
                <% if @post.user.avatar.attached? %>
                  <%= image_tag @post.user.avatar.variant(resize_to_fill: [32, 32]).processed, class: "img-thumbnail rounded-circle" %>
                <% else %>
                  <%= image_tag "no_image", class: "img-thumbnail rounded-circle" %>
                <% end %>
                <%= @post.user.name %>
            <% end %>
                <br>
                <br>

                <%= render 'likes/like', post: @post %>

                <br>
                <br>

                <div class="scroll">
                  <p>
                  <i class="fas fa-location-arrow"></i>
                  <br>
                  <%= @post.place %>
                  </p>
                </div>


                <div class="scroll">
                  <p>
                  <i class="fas fa-calendar-alt"></i>
                  <br>
                  <%= @post.date %>
                  </p>
                </div>

                <div class="scroll">
                  <p>
                  <i class="fas fa-closed-captioning"></i>
                  <br>
                  <%= @post.caption %>
                  </p>
                </div>
                                
            </div>
          </div>
        </div>
  </div>
</div>
    
    

<%# googleマップ %>
<div class="col-lg-12"> 

  <%# <input id="address" type="textbox">
  <input type="button" value="検索" onclick="codeAddress()">
 %>
  <div id='map'></div>

  <style>
  #map {
    height: 250px;
    width: 1100px;
  }
  
  </style>

  <script>
  let map

  function initMap(){
    geocoder = new google.maps.Geocoder()

    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: <%= @post.latitude %>, lng: <%= @post.longitude %>},
      zoom: 9,
    });

    marker = new google.maps.Marker({
      position:  {lat: <%= @post.latitude %> , lng: <%= @post.longitude %>},
      map: map
    });
  }

  let geocoder

  function codeAddress(){
    let inputAddress = document.getElementById('address').value;

    geocoder.geocode( { 'address': inputAddress}, function(results, status) {
      if (status == 'OK') {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
          map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('該当する結果がありませんでした：' + status);
      }
    });   
  }

  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBk8ADzxo8OlBK9b64JZuM7qvsJ5kocugY&callback=initMap" async defer></script>
</div>

<div class=" row col-3 mt-2 mx-auto">
  <% if user_signed_in? && current_user.id == @post.user_id %>
    <p>
      <%= link_to t(".edit"), edit_post_path(@post), method: :get, class: "btn btn-lg btn-secondary m-2" %>
    </p>
    <p>
      <%= button_tag t(".delete"), class: "btn btn-lg btn-secondary m-2", data: { toggle: "modal", target: "#delete-post" } %>
    </p>
  <% end %>


<%= render "delete_modal" , post: @post %>
